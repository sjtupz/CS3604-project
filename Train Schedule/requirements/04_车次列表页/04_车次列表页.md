3.1 页面布局

    3.1.1 页面从上到下为**顶部导航栏**、**车次查询栏**、**车次详细信息选择区**、**车次信息展示区**、**底部导航栏**四个部分，网站背景为白色

    3.1.2 顶部导航栏：由左侧**logo**、中间搜索栏、右侧功能按键组成

        3.1.2.1 左侧logo：由左侧的红色铁路图标、右上方黑色字样“中国铁路12306”、右下方灰色字样“12306 CHINA RAILWAY”组成

        3.1.2.2 中间搜索栏：由白色搜索框和右侧的蓝色放大镜搜索图标组成，无输入时搜索框内灰色字样显示“搜索车票、餐饮、常旅客、相关规章”

        3.1.2.3 右侧功能按键：横向排列“无障碍|敬老版|English |我的12306 |您好，请登录 注册”，“您好，请”为黑色，其余字样均为蓝色；如果已经登录，则功能按键为“无障碍|敬老版|English |我的12306 |您好，xx（用户名）|退出”

        3.1.2.4 下面为蓝色的导航栏：“首页”、“车票”、“团购服务”、“会员服务”、“站车服务”、“商旅服务”、“出行指南”、“信息查询” 

    3.1.3 车次查询栏：

        3.1.3.1 最左侧选择单程/双程，如果选择双程则中间“返程日”选择开放

        3.1.3.2 中间从左到右为选择出发地、目的地、出发日、返程日（如果双程则可选）

        3.1.3.3 出发地与目的地栏点击后具有下拉菜单，从左到右栏目分别为“热门”， “ABCDE”, "FGHIJ", "KLMNO", "PQRST", "UVWXYZ" ，同时这两个栏目支持手写输入

        3.1.3.4 右侧上下排列圆点方式选择“普通”/“学生”，最右侧为确认查询按钮

    3.1.4 车次详细信息选择区：由日期、车次类型、出发车站、到达车站、车次席别、发车时间范围组成，所有内容均为可选，如果不选则默认全部展示

        3.1.3.1 日期栏：位于最上方，用灰色线条单独围绕，从当日开始展示连续14天的选项，当前选中日期与3.1.3中选择的出发日期相同

        3.1.3.2 车次类型：“GC-高铁”、“D-动车”、“Z-直达”，如果不选则全部展示

        3.1.3.3 出发车站：（以上海为例）“上海虹桥”、“上海”、“上海松江”、“上海南”，不选则全部展示

        3.1.3.4 到达车站：（以北京为例）“北京南”、“北京丰台”、“北京”

        3.1.3.5 车次席别：“一等座”、“二等座”、“软卧”、“硬卧”、“硬座”

        3.1.3.6 发车时间：按钮在最右方，采用下拉选择式，默认0：00-24：00，其他可选项有0：00-6：00、6：00-12：00、12：00-18：00、18：00-24：00

    3.1.5 车次信息展示区：横向栏目由以下部分从左到右组成，上方采用蓝色横栏白色标题字样

        3.1.5.1 车次：展示列车好，如“G108”

        3.1.5.2 出发站/到达站：竖排在同一个格子内展示，上方为出发站，下方为到达站

        3.1.5.3 出发时间/到达时间：竖排在同一个格子内展示，上方为出发时间，下方为到达时间

        3.1.5.4 历时：即到达时间减出发时间，下方显示“当日到达”活“次日到达”

        3.1.5.5 车座类型：从左到右栏目为“一等座”、“二等座”、“软卧”、“硬卧”、“软座”、“硬座”、“无座”。状态有四种表示方式：如果该车次没有此类座位，则用灰色横杠表示，如果没有余票则橙色字样“候补”，如果有票且大于20张，则显示绿色“有”，如果有票且少于20张则用黑色字样显示现在余票数量

        3.1.5.6 备注：即“预定”按钮

    3.1.6 底部导航栏

        3.1.6.1 左侧为两竖排展示的铁路相关四个网站的图片logo

        3.1.6.2 右侧从左到右为中国铁路官方微信、中国铁路官方微博、12306 公众号、铁路12306的微信二维码

3.2 与其他页面跳转关系

    3.2.1 Scenario：用户未登录情况下点击“我的12306”
                Given：用户在**车次列表页**，且未登录
                When：用户点击**顶部导航栏**的功能按钮“我的12306”
                Then：跳转**登陆页**

    3.2.2 Scenario：用户已登录情况下点击“我的12306”
                Given：用户在**车次列表页**，且已登录
                When：用户点击**顶部导航栏**的功能按钮“我的12306”
                Then：跳转**个人中心**首页

    3.2.3 Scenario：用户未登录情况下点击“登录”
                Given：用户在**车次列表页**，且未登录
                When：用户点击**顶部导航栏**的功能按钮“登录”
                Then：跳转**登陆页**
    
    3.2.4 Scenario：用户未登录情况下点击“注册”
                Given：用户在**车次列表页**，且未登录
                When：用户点击**顶部导航栏**的功能按钮“注册”
                Then：跳转**注册页**

    3.2.5 Scenario：用户未登录情况下点击“首页”
                Given：用户在**车次列表页**
                When：用户点击**顶部导航栏**的下面蓝色导航栏中的“首页”
                Then：跳转**查询页**

    3.2.6 Scenario：用户未登录情况下点击“预定”
                Given：用户在**车次列表页**，且未登录
                When：用户点击**车次信息展示区**最右侧的按钮“预定”
                Then：跳转**登录页**

    3.2.7 Scenario：用户已登录情况下点击“预定”
                Given：用户在**车次列表页**，且已登陆
                When：用户点击**车次信息展示区**最右侧的按钮“预定”
                Then：跳转**订单填写页**

    3.2.8 Scenario：用户已登录情况下点击用户名
                Given：用户在**车次列表页**，且已登陆
                When：用户点击**顶部导航栏**功能按钮“您好，xx(用户名)”中的用户名按钮
                Then：跳转**个人中心**首页
    
    3.2.9 Scenario：用户已登录情况下点击退出
                Given：用户在**车次列表页**，且已登陆
                When：用户点击**顶部导航栏**功能按钮“退出”
                Then：跳转**登录页**

3.3 页面内操作

    3.3.1 Scenario: 用户进入页面
                Given: 用户进入该页面
                When: 不执行任何操作时
                Then：出发地与目的地随机填充，出发日与返程日均设置为当前日期，模式设置为“单程”，“普通”下方页面不显示车票情况

    3.3.1 Scenario: 出行信息不全时点击查询
                Given: 用户未填写出发地、目的地、出发日期中至少一项
                When: 点击查询
                Then：不弹出车票，无任何变化，无报错

    3.3.1 Scenario: 出行信息完整时点击查询
                Given: 用户已填写出发地、目的地、出发日期，未勾选下方车座信息等任何详细信息
                When: 点击查询
                Then：弹出所有改日两地间的车票

    3.3.1 Scenario: 用户选择详细信息
                Given: 用户在详细信息栏中选择“车次类型”， “出发车站”， “到达车站”， “车次席别”中任何类型
                When: 点击后
                Then：下方车票信息立刻对应做出变化，不需要用户再次点击“查询”按钮
    
    3.3.1 Scenario: 用户更改乘车日期
                Given: 用户在上边栏中选择新的乘车日期
                When: 点击该日期
                Then：信息栏中的“出发日期”改为该日期，下方车票信息更新

    3.3.1 Scenario: 用户更改发车时间
                Given: 用户在详细信息栏中下拉选择新的发车时间
                When: 点击该时间
                Then：下方车票信息立刻对应做出变化，不需要用户再次点击“查询”按钮

    3.3.1 Scenario: 用户点击“出发地”或“目的地”
                Given: 用户在页面中
                When: 点击“出发地”或“目的地”
                Then：弹出车站信息下拉菜单，同时支持打字输入

3.4 数据库设计
    
    3.4.1 **车票数据库**需要存储数据包括：
            - “车次”，“出发站”，所有“途经车站”，“到达站”，相邻两站之间“历时”
            - 车厢节号与对应车厢内席位种类，车厢内每个座位的座位序号，每个座位在线路相邻两站之间是否处于**空闲**或**已被预定**状态
            - 所有需要加入**车票数据库**的车次信息存储在“车次信息.json”文档中
            
    3.4.2 余票数的计算
        3.4.2.1 对于某一车次路线上相邻两站，直接从**数据库**中检索相邻站点之间相应席位的处于**空闲**状态的数量，得到结果后直接返回
        3.4.2.2 对于某一车次路线上不相邻的两站，如果有一个座位从出发站到到达站之间都处于**空闲**状态，则余票数加一；遍历整个列车所有特定席位的车厢，返回得到对应席位的余票数
        3.4.2.3 对于某一车次路线上不想临的两站，如果某一席位的的所有车厢的所有座位都在中途某两站之间的**已被预定**状态，则该车次席位余票数等于0
        3.4.2.4 **注意**：统计是否有余票时应该以座位为单位，只有一个座位从始至终都是**空闲**状态，余票数才加1。
    
    3.4.3 票价的计算：某两站之间某席位票价等于所有途经车站之间该席位票价之和
    
    3.4.4 数据库的更新与维护
        3.4.3.1 如果座位被用户**预定**成功，需要修改对应车次，对应车厢，对应座位号的相应站点之间**空闲**状态为**已被预定**状态
        3.4.3.2 数据库应支持新车次的加入与已有车次的删除
        3.4.3.4 数据库支持的“出发地“”到达地“分别为有数据库中车次途径或出发的车站/地区，数据库中有车次途径或到达的车站/地区