5. 订单填写页
   
    5.1 注册页页面布局

        5.1.1 整体页面布局：整体页面风格和首页一致，背景为白色，分上、中、下三部分布局，上、中两部分的页面布局和接口实现与首页一致，分别分为顶部导航栏和常用功能快捷入口。下方则是**购票页面**

        5.1.2 **购票界面**：分为从上到下依次为”列车信息“窗口，”乘客信息“窗口，以及选项按钮
            - 列车信息窗口：顶部为标题”列车信息（以下余票信息仅供参考）“，蓝底白字。下方为具体内容，列出信息包括：车次日期、列车号、出发站、到达站、出发时间、到达时间、一等座/二等座/软卧/硬卧的剩余席位数量与价格
            - 乘客信息窗口：顶部左侧为标题”乘客信息“，蓝底白字。下方依次为**乘车人信息区域**，**车票信息区域**
                - **乘车人信息区域**左上角为标题“乘车人”，下方从左到右依次列出该用户已添加的乘车人姓名，每个姓名左侧有一个勾选框
                - **车票信息区域**初始化为一行，每行从左到右依次列出票种选择框，席别选择框，姓名显示框，证件类型选择框，证件号码显示框
            - 选项按钮：左边为白底黑字的“上一步”按钮，右边为橙底白字的“提交订单”按钮。点击“上一步”按钮返回车次列表页，点击“提交订单”按钮可提交订单

        5.1.3 整体页面布局的尺寸应保持固定，不随用户窗口大小变化、系统提示信息弹出等情况而改变

    5.2 订单填写页初始化

        Scenario: 列车信息窗口初始化
            Given：系统跳转到订单填写页
            When：购票界面已经正确加载
            Then：根据用户此前在车次列表页选择的车次信息，在**列车信息窗口**中显示该车次的详细信息，包括车次日期、列车号、出发站、到达站、出发时间、到达时间、一等座/二等座/软卧/硬卧的剩余席位数量与价格
        
        Scenario: 票种选择框选项初始化
            Given：系统跳转到订单填写页
            When：购票界面已经正确加载
            Then：**乘客信息窗口**中的票种选择框包含选项“成人票”
            And：默认选择“成人票”

        Scenario: 席别选择框选项初始化
            Given：系统跳转到订单填写页
            When：购票界面已经正确加载
            Then：**乘客信息窗口**中的席别选择框包含选项“一等座（200元）”、“二等座（100元）”、“软卧（120元）”、“硬卧（74.5元）”
            And：默认选择“二等座（100元）”
            And：售罄的席别保留在选项中，但设置为灰色不可点击状态

        Scenario: 姓名显示框与证件号码显示框初始化
            Given：系统跳转到订单填写页
            When：购票界面已经正确加载
            Then：姓名显示框与证件号码显示框均显示为空

        Scenario: 证件类型选择框初始化
            Given：系统跳转到订单填写页
            When：购票界面已经正确加载
            Then：**乘客信息窗口**中的证件类型选择框包含选项“身份证”、“港澳居民居住证”、“台湾居民居住证”、“外国人永久居留身份证”、”外国护照“、”中国护照“、“港澳居民来往内地通行证”、“台湾居民来往大陆通行证”
            And：默认选择“身份证”

    5.3 用户选择乘车人

        Scenario: 用户选择一位乘车人
            Given：系统跳转到订单填写页，购票界面已经正确加载
            When：用户点击乘车人信息区域中的某个姓名旁的勾选框
            Then：车票信息区域中当前行内的姓名显示框显示该乘车人的姓名
            And：证件号码显示框显示该乘车人的证件号码，且仅显示前4位与后3位，中间用“*”号遮挡
            And：证件类型选择框中锁定为该乘车人的证件类型

        Scenario: 用户选择的乘车人多于一人
            Given：系统跳转到订单填写页，购票界面已经正确加载
            And：用户已经选择一名乘车人
            When：用户选择新的乘车人
            Then：车票信息区域中会新增对应行数
            And：新增行内的姓名显示框显示该乘车人的姓名
            And：新增行内的证件号码显示框显示该乘车人的证件号码，且仅显示前4位与后3位，中间用“*”号遮挡
            And：新增行内的证件类型选择框中锁定为该乘车人的证件类型

        Scenario: 用户取消乘车人
            Given：系统跳转到订单填写页，购票界面已经正确加载
            And：用户已经选择乘车人
            When：用户取消勾选某位乘车人
            Then：车票信息区域中该乘车人对应的行消失

    5.4 用户选择席位

        Scenario: 用户选择席位
            Given：系统跳转到订单填写页，购票界面已经正确加载
            When：用户点击车票信息区域中某一行内的席别选择框
            Then：席别选择框下方展示选项列表
            And：用户点击其中一个选项，选项列表关闭，用户选择的席别显示在席别选择框中

        Scenario: 用户更改席位选择
            Given：系统已为乘车人默认选择席别，或用户已经选择了席别
            When：用户点击席别选择框，并从选项列表中选择其他席别
            Then：该乘车人的席位变更为用户选择的席别

    5.5 用户提交订单

        Scenario: 用户未选择任何乘车人点击“提交订单”
            Given：用户在订单填写页，未勾选任何乘车人
            When：用户点击“提交订单”按钮
            Then：网页中心弹出弹窗，提示“请选择乘车人！”
            And：弹窗有“确认”按钮，点击可关闭弹窗，页面回到订单填写页
        
        Scenario：用户提交订单时车票售罄
            Given：用户在订单填写页，并已勾选至少一名乘车人
            And：用户网络正常
            When：用户点击“提交订单”按钮
            And：系统在确认车票时发现该车次该席别车票已经售罄或者该席别车票余票数小于用户订单需求数量（可能因为其他用户在其他窗口或页面上购买了该席别车票）
            Then：网页中心弹出弹窗，提示“该车次该席别车票已售罄！”
            And：弹窗有“确认”按钮，点击可关闭弹窗，页面回到订单填写页

        Senario：用户提交订单时网络异常
            Given：用户在订单填写页，并已勾选至少一名乘车人
            And：用户网络异常
            When：用户点击“提交订单”按钮
            Then：网页中心弹出弹窗，提示：“网络忙，请稍后再试”
            And：弹窗有“确认”按钮，点击可关闭提示弹窗，回到订单填写页

        Scenario: 用户选择乘车人后成功提交订单
            Given：用户在订单填写页，并已勾选至少一名乘车人
            And：用户网络正常
            When：用户点击“提交订单”按钮
            And：系统确认用户选择的乘车人信息和席位，车票未售罄且可以满足用户提交订单的需求数量
            Then：网页中心弹出**确认订单弹窗**
    
    5.6 用户确认订单

        5.6.1 确认订单弹窗
                - 弹窗从上到下依次为：**标题区域**，**订单信息区域**，**按钮区域**
                - 标题区域为蓝色，左侧显示白字标题“请核对以下信息”
                - 订单信息区域显示用户选择的乘车人、席别、车票价格等订单相关信息
                - 按钮区域左侧为白底黑字的“返回修改”按钮，右侧为橙底白字的“确认”按钮。
        
        5.6.2 用户交互
                - 点击“确认”按钮后，系统将用户订单提交到服务器，订单状态变更为“待支付”，并跳转到支付页面
                - 点击“返回修改”按钮后，用户可以返回订单填写页修改订单信息

