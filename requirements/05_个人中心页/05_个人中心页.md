5.1 页面布局

    5.1.1 页面从上到下为**顶部导航栏**、**个人中心主页**、**底部导航栏**三个部分，网站背景为白色。个人中心页具有左侧栏，从上到下的加粗板块为“个人中心”， “订票中心”， “本人车票”， “会员中心”， “个人信息”， “常用信息管理”， “温馨提示”， “投诉和建议”

        5.1.1.1 “个人中心”：即个人中心主页

        5.1.1.2 “订票中心”：从上到下为“火车票订单”， “候补车票”， “计次/定期票订单”， “约号订单”， “雪具快运订单”， “餐饮特产”， “保险订单”， “电子发票”。在我们的项目中只需要实现“火车票订单”接口，其余的将接口名字排列就可以，不需要实际写跳转

        5.1.1.3 “个人信息”：从上到下为“查看个人信息”， “账号安全”， “手机核验”， “账号注销”。在我们的项目中只需要实现“查看个人信息接口”，其余的将接口名字排列就可以，不需要实际写跳转

        5.1.1.4 常用信息管理：从上到下为“乘车人”， “地址管理”。在我们的项目中只需要实现“乘车人”接口，其余的将接口名字排列就可以，不需要实际写跳转

    5.1.2 顶部导航栏：由左侧**logo**、中间搜索栏、右侧功能按键组成

        5.1.2.1 左侧logo：由左侧的红色铁路图标、右上方黑色字样"中国铁路12306"、右下方灰色字样"12306 CHINA RAILWAY"组成

        5.1.2.2 中间搜索栏：由白色搜索框和右侧的蓝色放大镜搜索图标组成，无输入时搜索框内灰色字样显示"搜索车票、餐饮、常旅客、相关规章"

        5.1.2.3 右侧功能按键：横向排列"无障碍|敬老版|English |我的12306 |您好，xx（用户名）|退出"，"您好，"为黑色，其余字样均为蓝色

        5.1.2.4 下面为蓝色的导航栏："首页"、"车票"、"团购服务"、"会员服务"、"站车服务"、"商旅服务"、"出行指南"、"信息查询"

    5.1.3 个人中心主页：

        5.1.3.1 最上方显示用户真实名称、欢迎语

        5.1.3.2 提供会员服务和车票服务两个区域的接口

        5.1.3.3 下方提供微信和支付宝二维码可以设置信息接收方式

        5.1.3.4 最下方有黄色边框的温馨提示栏，内容为
        “1.消息通知方式进行相关调整，将通过“铁路12306”App客户端为您推送相关消息（需开启通知权限）。您也可以扫描关注“铁路12306”微信公众号或支付宝生活号，选择通过微信或支付宝接收。列车运行调整的通知仍然发送短信通知给您。
        2.您可通过“账号安全”中的“通知设置”修改您接收信息服务的方式。”

    5.1.4 火车票订单板块：

        5.1.4.1 板块标题包含三个并列标签："未完成订单"、"未出行订单"、"历史订单"

        5.1.4.2 未完成订单区域：显示当前已锁定席位但未支付的订单，如果为空，则在中间提供前往车票预定板块的接口，每个订单右侧有"跳转支付"按钮

        5.1.4.3 未出行订单区域：最上方提供查询功能，可以分"按订票日期"和"按乘车日期"两种方式进行查询，两种方式下均可设置起始和终止日期以及订单号/车次/姓名；订单列表从左到右为车次信息、旅客信息、席位信息、票价和车票状态，在标题和具体内容之间有一行订票日期信息；每个订单右侧有"退票"和"改签"按钮；下方有提示信息，只保留三十天信息

        5.1.4.4 历史订单区域：只能按照乘车日期进行查询，查询方式与未出行订单相同；订单列表格式与未出行订单相同；每个订单右侧有"打印信息单"按钮；下方有提示信息，只保留三十天信息

        5.1.4.5 三种订单区域互不重合，未出行订单不会出现在历史订单中

    5.1.5 退票申请弹窗：

        5.1.5.1 弹窗独立于网站界面，在非全屏状态下拉动底部横移条时会始终保持居中

        5.1.5.2 在该页面存在时无法点击原网站页面内容，原网站覆盖灰色，该页面高亮

        5.1.5.3 页面中显示退款手续费用，确认取消按钮以及最下方的注意事项

    5.1.6 退票成功界面：

        5.1.6.1 显示车次信息和退票手续费等内容

        5.1.6.2 提供"继续购票"和"查看订单详情"两个接口，"继续购票"跳转至车票板块，"查看订单详情"跳转至"未出行订单"板块

        5.1.6.3 退票后的车票信息现在仍处于"未出行订单"区域，但信息置灰，在该车次完成行程后归入"历史订单"板块

    5.1.7 查看个人信息板块：

        5.1.7.1 基本信息板块：包含用户名、姓名、国家/地区、证件类型、证件号码、核验状态，这部分内容不可在该页面修改

        5.1.7.2 联系方式板块：包含手机号和邮箱两个信息，如果已经通过核验会显示"已通过核验"，右侧有编辑按钮，点击后已通过核验字样处变为"去手机核验修改"，提供跳转链接；邮箱可以为空

        5.1.7.3 优惠类型板块：右侧有编辑按钮，点击后类型可下拉选择，从上到下为成人、儿童、学生、残疾军人四个类型

        5.1.7.4 学生资质查询板块：只有选择学生类型并保存后才会出现，具有刷新和查询两个按钮

    5.1.8 乘车人板块：

        5.1.8.1 最上方有一个查询条，可以根据乘客姓名查询乘车人信息

        5.1.8.2 信息展示部分从左到右为序号、姓名、证件类型、证件号码、手机/电话、核验状态、操作

        5.1.8.3 选中若干乘车人之后可以进行批量删除

        5.1.8.4 右侧操作部分可以单独删除乘车人或对乘车人信息进行修改

        5.1.8.5 点击添加按钮，跳转到新的界面

    5.1.9 添加/修改乘车人界面：

        5.1.9.1 基本信息部分：证件类型、姓名、证件号码

        5.1.9.2 联系方式部分：有效电话号

        5.1.9.3 附加信息部分：优惠类型，与个人信息中的优惠类型相同

        5.1.9.4 证件类型和手机号码均支持若干类型

        5.1.9.5 证件类型为居民身份证、港澳居民来往大陆通行证、中国护照时，要求姓名只能包含中文或英文；外国护照时只能为英文或空格；其余类型在输入数字或者字符的情况下不会直接报错

        5.1.9.6 证件号格式不匹配时会显示"请输入正确的证件号码！"

        5.1.9.7 在姓名或证件号码为空的情况下会在下方显示"请输入xxx"

        5.1.9.8 外国人永久居留身份证等几个情况下需要有效截止日期、出生日期，这两部分提供日历进行选择，也可以自行输入，但不会直接报错；在乱输入有效截止日期和出生日期提交时，显示错误信息

        5.1.9.9 不同证件类型会有不同的基本信息和联系方式要求

    5.1.10 底部导航栏

        5.1.10.1 左侧为两竖排展示的铁路相关四个网站的图片logo

        5.1.10.2 右侧从左到右为中国铁路官方微信、中国铁路官方微博、12306 公众号、铁路12306的微信二维码

5.2 与其他页面跳转关系

    5.2.1 Scenario：用户未登录情况下点击"我的12306"
                Given：用户在其他页面，且未登录
                When：用户点击**顶部导航栏**的功能按钮"我的12306"
                Then：跳转**登录页**

    5.2.2 Scenario：用户已登录情况下点击"我的12306"
                Given：用户在其他页面，且已登录
                When：用户点击**顶部导航栏**的功能按钮"我的12306"
                Then：跳转**个人中心**首页

    5.2.3 Scenario：用户点击"首页"
                Given：用户在**个人中心页**
                When：用户点击**顶部导航栏**的下面蓝色导航栏中的"首页"
                Then：跳转**查询页**

    5.2.4 Scenario：用户点击"车票"
                Given：用户在**个人中心页**
                When：用户点击**顶部导航栏**的下面蓝色导航栏中的"车票"
                Then：跳转**车次列表页**

    5.2.5 Scenario：用户点击"继续购票"
                Given：用户在**个人中心页**的退票成功界面
                When：用户点击"继续购票"按钮
                Then：跳转**车次列表页**

    5.2.6 Scenario：用户点击"查看订单详情"
                Given：用户在**个人中心页**的退票成功界面
                When：用户点击"查看订单详情"按钮
                Then：跳转**个人中心页**的"未出行订单"板块

    5.2.7 Scenario：用户点击"跳转支付"
                Given：用户在**个人中心页**的"未完成订单"板块
                When：用户点击订单右侧的"跳转支付"按钮
                Then：跳转**支付页**

    5.2.8 Scenario：用户点击"跳转车票预定"
                Given：用户在**个人中心页**的"未完成订单"板块，且该板块为空
                When：用户点击中间的"跳转车票预定"接口
                Then：跳转**车次列表页**

    5.2.9 Scenario：用户点击"去手机核验修改"
                Given：用户在**个人中心页**的"查看个人信息"板块，且联系方式已通过核验
                When：用户点击编辑按钮后点击"去手机核验修改"链接
                Then：跳转**手机核验页**

    5.2.10 Scenario：用户点击用户名
                Given：用户在**个人中心页**
                When：用户点击**顶部导航栏**功能按钮"您好，xx(用户名)"中的用户名按钮
                Then：跳转**个人中心**首页

    5.2.11 Scenario：用户点击退出
                Given：用户在**个人中心页**，且已登录
                When：用户点击**顶部导航栏**功能按钮"退出"
                Then：跳转**登录页**

5.3 页面内操作

    5.3.1 Scenario: 用户进入页面
                Given: 用户已登录并进入该页面
                When: 不执行任何操作时
                Then：自动进入个人中心主页，显示用户真实名称、欢迎语，提供会员服务和车票服务两个区域的接口，下方显示微信和支付宝二维码

    5.3.2 Scenario: 用户点击"未完成订单"标签
                Given: 用户在**个人中心页**的火车票订单板块
                When: 用户点击"未完成订单"标签
                Then：显示当前已锁定席位但未支付的订单列表，如果为空则显示前往车票预定板块的接口

    5.3.3 Scenario: 用户点击"未出行订单"标签
                Given: 用户在**个人中心页**的火车票订单板块
                When: 用户点击"未出行订单"标签
                Then：显示未出行订单列表，最上方显示查询功能，可以分"按订票日期"和"按乘车日期"两种方式进行查询

    5.3.4 Scenario: 用户点击"历史订单"标签
                Given: 用户在**个人中心页**的火车票订单板块
                When: 用户点击"历史订单"标签
                Then：显示历史订单列表，最上方显示查询功能，只能按照乘车日期进行查询

    5.3.5 Scenario: 用户在未出行订单中查询
                Given: 用户在**个人中心页**的"未出行订单"板块
                When: 用户选择"按订票日期"或"按乘车日期"，设置起始和终止日期以及订单号/车次/姓名，点击查询
                Then：下方订单列表根据查询条件进行筛选更新

    5.3.6 Scenario: 用户在历史订单中查询
                Given: 用户在**个人中心页**的"历史订单"板块
                When: 用户设置起始和终止日期以及订单号/车次/姓名，点击查询
                Then：下方订单列表根据查询条件进行筛选更新

    5.3.7 Scenario: 用户点击"退票"按钮
                Given: 用户在**个人中心页**的"未出行订单"板块
                When: 用户点击订单右侧的"退票"按钮
                Then：弹出"退票申请"弹窗，显示退款手续费用，确认取消按钮以及最下方的注意事项，原网站覆盖灰色，该页面高亮

    5.3.8 Scenario: 用户确认退票
                Given: 用户在**个人中心页**的"退票申请"弹窗
                When: 用户点击确认按钮
                Then：跳转至退票成功界面，显示车次信息和退票手续费等内容，并提供"继续购票"和"查看订单详情"两个接口

    5.3.9 Scenario: 用户取消退票
                Given: 用户在**个人中心页**的"退票申请"弹窗
                When: 用户点击取消按钮
                Then：弹窗关闭，返回"未出行订单"板块

    5.3.10 Scenario: 用户点击"改签"按钮
                Given: 用户在**个人中心页**的"未出行订单"板块
                When: 用户点击订单右侧的"改签"按钮
                Then：跳转**订单填写页**，并预填充原订单信息

    5.3.11 Scenario: 用户点击"打印信息单"按钮
                Given: 用户在**个人中心页**的"历史订单"板块
                When: 用户点击订单右侧的"打印信息单"按钮
                Then：生成并打印订单信息单

    5.3.12 Scenario: 用户编辑联系方式
                Given: 用户在**个人中心页**的"查看个人信息"板块
                When: 用户点击联系方式板块右侧的编辑按钮
                Then：已通过核验字样处变为"去手机核验修改"，提供跳转链接

    5.3.13 Scenario: 用户编辑优惠类型
                Given: 用户在**个人中心页**的"查看个人信息"板块
                When: 用户点击优惠类型板块右侧的编辑按钮
                Then：类型可下拉选择，从上到下为成人、儿童、学生、残疾军人四个类型

    5.3.14 Scenario: 用户选择学生类型
                Given: 用户在**个人中心页**的"查看个人信息"板块，且已点击编辑优惠类型
                When: 用户选择学生类型并保存
                Then：下方出现"学生资质查询"板块，具有刷新和查询两个按钮

    5.3.15 Scenario: 用户在乘车人板块查询
                Given: 用户在**个人中心页**的"乘车人"板块
                When: 用户在查询条中输入乘客姓名并查询
                Then：下方乘车人信息列表根据姓名进行筛选更新

    5.3.16 Scenario: 用户批量删除乘车人
                Given: 用户在**个人中心页**的"乘车人"板块
                When: 用户选中若干乘车人后点击批量删除
                Then：选中的乘车人信息被删除，列表更新

    5.3.17 Scenario: 用户单独删除乘车人
                Given: 用户在**个人中心页**的"乘车人"板块
                When: 用户点击某个乘车人右侧操作部分的删除按钮
                Then：该乘车人信息被删除，列表更新

    5.3.18 Scenario: 用户修改乘车人信息
                Given: 用户在**个人中心页**的"乘车人"板块
                When: 用户点击某个乘车人右侧操作部分的修改按钮
                Then：跳转到添加/修改乘车人界面，并预填充该乘车人的信息

    5.3.19 Scenario: 用户添加乘车人
                Given: 用户在**个人中心页**的"乘车人"板块
                When: 用户点击添加按钮
                Then：跳转到添加/修改乘车人界面，所有字段为空

    5.3.20 Scenario: 用户提交乘车人信息时证件号格式错误
                Given: 用户在添加/修改乘车人界面
                When: 用户输入的证件号格式不匹配
                Then：显示"请输入正确的证件号码！"

    5.3.21 Scenario: 用户提交乘车人信息时必填项为空
                Given: 用户在添加/修改乘车人界面
                When: 用户未填写姓名或证件号码
                Then：在下方显示"请输入xxx"

    5.3.22 Scenario: 用户提交乘车人信息时日期格式错误
                Given: 用户在添加/修改乘车人界面，且证件类型需要有效截止日期和出生日期
                When: 用户乱输入有效截止日期和出生日期并提交
                Then：显示错误信息

5.4 数据库设计

    5.4.1 **用户信息数据库**需要存储数据包括：
            - 用户名、真实姓名、国家/地区、证件类型、证件号码、核验状态
            - 手机号、邮箱、手机号核验状态
            - 优惠类型（成人、儿童、学生、残疾军人）
            - 学生资质信息（如果优惠类型为学生）
            
    5.4.2 **订单数据库**需要存储数据包括：
            - 订单号、用户ID、订票日期
            - 车次信息、出发站、到达站、出发时间、到达时间
            - 旅客信息（姓名、证件类型、证件号码）
            - 席位信息（车厢号、座位号、席位类型）
            - 票价、订单状态（未完成、未出行、历史、已退票）
            - 乘车日期、退票日期（如果已退票）、退票手续费（如果已退票）
            
    5.4.3 **乘车人数据库**需要存储数据包括：
            - 乘车人ID、关联用户ID
            - 姓名、证件类型、证件号码、核验状态
            - 手机/电话、有效截止日期（如果需要）、出生日期（如果需要）
            - 优惠类型（成人、儿童、学生、残疾军人）
            
    5.4.4 订单状态的更新与维护
        5.4.4.1 如果用户成功支付订单，需要将订单状态从"未完成"更新为"未出行"
        5.4.4.2 如果用户退票成功，需要将订单状态更新为"已退票"，记录退票日期和退票手续费，同时更新**车票数据库**中对应座位的状态为**空闲**
        5.4.4.3 如果车次完成行程，需要将订单状态从"未出行"或"已退票"更新为"历史"
        5.4.4.4 未出行订单和历史订单均只保留三十天信息，超过三十天的订单需要自动归档或删除
        
    5.4.5 乘车人信息的验证
        5.4.5.1 证件类型为居民身份证、港澳居民来往大陆通行证、中国护照时，姓名只能包含中文或英文
        5.4.5.2 外国护照时姓名只能为英文或空格
        5.4.5.3 不同证件类型需要验证对应的证件号码格式
        5.4.5.4 外国人永久居留身份证等类型需要验证有效截止日期和出生日期的有效性

